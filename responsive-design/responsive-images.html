<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsiveness Images</title>
</head>

<body>
    <!-- 
        >> Images require a little special care on responsive websites

        Baiscs: 
        >> most basic problem that you are going to face when working with responsive images is the aspect-ratio, or the relationship between width and height
        >> If you shrink the width of an image on smaller screens, and do not also manipulate the height the image will appear distorted!

        >> solution to this issue is incredibly easy, and we’ve already mentioned it in an earlier lesson: simply don’t define both a width and a height
        >> If an image is given a flexible width, and the height is set to auto, then it should retain it’s aspect ratio correctly

        background-size, background-position and object-fit: 
        >> What if you don’t want your image to simply shrink (in both height and width)?
            >> background-size and object-fit are two properties that can provide a little more flexibility (pun intended) with how aspect-ratios are handled
            >> background-position and background-size are properties that work on elements with a background image, and do not work on normal img tags
                >> you can get quite a lot of control over the display and placement of background images by working with these properties
            >> For example, background-position: center will make sure the image is always centered in it’s container, even if the container is too small to fit the whole image
            >> background-size: cover will resize the image so that it is always completely filling it’s container while cropping as little as possible
     -->
    <div class="background-isp">
        <style>
            .background-isp>.image-container {
                height: 100vh;
                margin: 0;
                background-image: url(https://images.unsplash.com/photo-1578241561880-0a1d5db3cb8a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2070&q=80);
                background-size: cover;
                background-position: center;
            }
        </style>
        <div class="image-container"></div>
    </div>

    <!-- 
        background-size, background-position and object-fit: contiued: 
        >> object-fit works similarly, but is meant for img tags
        >> With the object-fit property you can specify a width and height for your images and then tell an image how it is supposed to fit itself to those dimensions
        >> default value for object-fit is fill, which simply stretches the image to fit the dimensions, but much like background-size you can also tell it to cover or contain the image
     -->
    <div class="object-fit">
        <style>
            .object-fit>img {
                /* height: 300px; */
                width: 100%;
                object-fit: cover;
            }
        </style>
        <img src="https://images.unsplash.com/photo-1578241561880-0a1d5db3cb8a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2070&q=80"
            alt="">
    </div>

    <!-- 
        Even More Control!: 
        >> It is also possible to literally use different images for different screen sizes
        >> This gives you the most control over exactly how your images are displayed at various resolutions
            >> For example, instead of just trusting object-fit to keep the subject of a photograph in frame, you could present a cropped version of it on smaller screens
            >> There are two ways of achieving this, but the most flexible is using the <picture> tag
     -->

    <!-- 
        How do you create responsive images?
        
        >> Resolution switching: Different sizes: 
        >> So, what is the problem that we want to solve with resolution switching?
            >> We want to display identical image content, just larger or smaller depending on the device
        >> standard <img> element traditionally only lets you point the browser to a single source file: <img src="elva-fairy-800w.jpg" alt="Elva dressed as a fairy">
        >> We can however use two new attributes — srcset and sizes — to provide several additional source images along with hints to help the browser pick the right one
            >> <img srcset="elva-fairy-480w.jpg 480w,
                        elva-fairy-800w.jpg 800w"
                sizes="(max-width: 600px) 480px,
                        800px"
                src="elva-fairy-800w.jpg"
                alt="Elva dressed as a fairy">
            >> Each value contains a comma-separated list, and each part of those lists is made up of three sub-parts
            >> srcset defines the set of images we will allow the browser to choose between, and what size each image is
            >> Each set of image information is separated from the previous one by a comma
            >> For each one, we write: 
                >> An image filename (elva-fairy-480w.jpg)
                >> A space
                >> image's intrinsic width in pixels (480w)
                    >> note that this uses the w unit, not px as you might expect
                    >> An image's intrinsic size is its real size, which can be found by inspecting the image file on your computer
            >> sizes defines a set of media conditions (e.g. screen widths) and indicates what image size would be best to choose, when certain media conditions are true
            >> In this case, before each comma we write: 
                >> A media condition ((max-width:600px)): we are saying "when the viewport width is 600 pixels or less"
                >> A space
                >> width of the slot the image will fill when the media condition is true (480px)
                    >> you can alternatively provide a width relative to the viewport (for example, 50vw) — but not a percentage
            >> browser ignores everything after the first matching condition, so be careful how you order the media conditions
            >> So, with these attributes in place, the browser will: 
                >> Look at its device width
                >> Work out which media condition in the sizes list is the first one to be true
                >> Look at the slot size given to that media query
                >> Load the image referenced in the srcset list that has the same size as the slot or, if there isn't one, the first image that is bigger than the chosen slot size
        
        >> Resolution switching: Same size, different resolutions: 
        >> If you're supporting multiple display resolutions, but everyone sees your image at the same real-world size on the screen, you can allow the browser to choose an appropriate resolution image by using srcset with x-descriptors and without sizes
            >> <img srcset="elva-fairy-320w.jpg,
                        elva-fairy-480w.jpg 1.5x,
                        elva-fairy-640w.jpg 2x"
                src="elva-fairy-640w.jpg"
                alt="Elva dressed as a fairy">
            >> In this case, sizes is not needed: 
                >> browser works out what resolution the display is that it is being shown on, and serves the most appropriate image referenced in the srcset
            >> So if the device accessing the page has a standard/low resolution display, with one device pixel representing each CSS pixel, the elva-fairy-320w.jpg image will be loaded (the 1x is implied, so you don't need to include it.)
            >> If the device has a high resolution of two device pixels per CSS pixel or more, the elva-fairy-640w.jpg image will be loaded
        
        >> Art direction: 
        >> art direction problem involves wanting to change the image displayed to suit different image display sizes
        >> It would probably be better to show a smaller, portrait image on mobile
        >> <picture> element allows us to implement just this kind of solution
        >> <picture> element is a wrapper containing several <source> elements that provide different sources for the browser to choose from, followed by the all-important <img> element
            >> <picture>
                <source media="(max-width: 799px)" srcset="elva-480w-close-portrait.jpg">
                <source media="(min-width: 800px)" srcset="elva-800w.jpg">
                <img src="elva-800w.jpg" alt="Chris standing up holding his daughter Elva">
            </picture>
            >> <source> elements include a media attribute that contains a media condition: 
                >> as with the first srcset example, these conditions are tests that decide which image is shown — the first one that returns true will be displayed
            >> srcset attributes contain the path to the image to display
            >> In all cases, you must provide an <img> element, with src and alt, right before </picture>, otherwise no images will appear
            >> This provides a default case that will apply when none of the media conditions return true (you could actually remove the second <source> element in this example), and a fallback for browsers that don't support the <picture> element
            >> You should use the media attribute only in art direction scenarios; when you do use media, don't also offer media conditions within the sizes attribute

        >> Why can't we just do this using CSS or JavaScript?
            >> When the browser starts to load a page, it starts to download (preload) any images before the main parser has started to load and interpret the page's CSS and JavaScript
            >> That mechanism is useful in general for reducing page load times, but it is not helpful for responsive images — hence the need to implement solutions like srcset
            >> For example, you couldn't load the <img> element, then detect the viewport width with JavaScript, and then dynamically change the source image to a smaller one if desired
            >> By then, the original image would already have been loaded, and you would load the small image as well, which is even worse in responsive image terms
        
        >> Use modern image formats boldly: 
            >> New image formats like WebP and AVIF can maintain a low file size and high quality at the same time
            >> <picture>
                <source type="image/svg+xml" srcset="pyramid.svg">
                <source type="image/webp" srcset="pyramid.webp">
                <img src="pyramid.png" alt="regular pyramid built from four equilateral triangles">
               </picture>
            >> Do not use the media attribute, unless you also need art direction
            >> In a <source> element, you can only refer to images of the type declared in type
            >> Use comma-separated lists with srcset and sizes, as needed
        
        >> Summary: 
            >> Art direction: 
               >> problem whereby you want to serve cropped images for different layouts — for example a landscape image showing a full scene for a desktop layout, and a portrait image showing the main subject zoomed in for a mobile layout
               >> You can solve this problem using the <picture> element
            >> Resolution switching: 
                >> problem whereby you want to serve smaller image files to narrow-screen devices, as they don't need huge images like desktop displays do — and to serve different resolution images to high density/low density screens
                >> You can solve this problem using vector graphics (SVG images) and the srcset with sizes attributes
      -->

    <div class="hands-on">
        <style>
            html {
                font-family: sans-serif;
                background-color: gray;
            }

            body {
                width: 100%;
                max-width: 1200px;
                margin: 0 auto;
                background-color: white;
            }

            header {
                background: url(header.jpg) no-repeat center;
                height: 200px;
            }

            section {
                padding: 20px;
            }

            p {
                line-height: 1.5;
            }

            img {
                display: block;
                margin: 0 auto;
                max-width: 100%;
            }

            #sp-img {
                width: 310px !important;
            }
        </style>
        <section>
            <h1>My website</h1>

            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eget venenatis ligula. Ut lacinia at
                dolor vitae pulvinar. Aliquam pretium dignissim eros. Integer faucibus, dui non aliquet bibendum, lectus
                orci lobortis odio, ornare porttitor est tellus eget velit. Nulla eros elit, malesuada id neque vel,
                viverra vehicula neque. Nullam auctor turpis non leo iaculis finibus. Quisque blandit arcu venenatis
                libero tempor, ac pulvinar ligula dapibus.</p>

            <!-- <img src="elva-800w.jpg" alt="Chris standing up holding his daughter Elva"> -->
            <picture>
                <source media="(max-width: 600px)" srcset="./assets/nz-lake.jpg">
                <source media="min-width: 601px" srcset="./assets/nz-lake-medium.jpg">
                <img src="./assets/nz-lake-medium.jpg" alt="an amazing view of a lake in nz">
            </picture>

            <p>Suspendisse potenti. Ut in luctus eros. Mauris pulvinar vehicula aliquet. Etiam imperdiet eleifend
                luctus. Duis ut justo nec eros ornare consectetur. Vestibulum convallis condimentum varius. Maecenas
                rutrum porta varius. Phasellus volutpat sem id sagittis luctus. Morbi vitae quam vitae nisi iaculis
                dignissim.</p>

            <!-- <img src="elva-fairy-800w.jpg" alt="Elva dressed as a fairy"> -->
            <!-- <img src="./assets/landscape-medium-view.jpg" alt="amzing landscape ariel view" srcset="./assets/landscape-small-view.jpg, ./assets/landscape-medium-view.jpg "> -->
            <img src="./assets/landscape-medium-view.jpg" alt="amazing landscape ariel view"
                sizes="(max-width: 600px) 490px, 801px"
                srcset="./assets/landscape-small-view.jpg 490px, ./assets/landscape-medium-view.jpg 900px">

            <p>Suspendisse potenti. Ut in luctus eros. Mauris pulvinar vehicula aliquet. Etiam imperdiet eleifend
                luctus. Duis ut justo nec eros ornare consectetur. Vestibulum convallis condimentum varius. Maecenas
                rutrum porta varius. Phasellus volutpat sem id sagittis luctus. Morbi vitae quam vitae nisi iaculis
                dignissim.</p>

                <!-- <img id="sp-img" src="./assets/landscape-small-view.jpg" alt="Another way of looking at it" > -->
            <img id="sp-img" src="./assets/landscape-small-view.jpg" alt="Another way of looking at it"
                srcset="./assets/landscape-small-view.jpg, ./assets/landscape-small-view.jpg 1.5x, ./assets/landscape-small-view.jpg 2x">

            <p>Header image originally by <a href="https://www.flickr.com/photos/miwok/17086751527/">Miwok</a>.</p>
        </section>
    </div>
</body>

</html>